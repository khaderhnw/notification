<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Newborn Digital Birth Certificate – Prototype</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React + ReactDOM -->
    <script
      src="https://unpkg.com/react@18/umd/react.production.min.js"
      crossorigin
    ></script>
    <script
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
      crossorigin
    ></script>

    <!-- Lucide React icons (for journeys) -->
    <script src="https://unpkg.com/lucide-react@0.263.1/dist/umd/lucide-react.min.js"></script>
    <!-- Plain Lucide (for summary page icons using data-lucide) -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap");
      body {
        margin: 0;
        font-family: "Inter", system-ui, -apple-system, BlinkMacSystemFont,
          "Segoe UI", sans-serif;
        background-color: #f1f5f9;
      }

      .animate-fade-in {
        animation: fadeIn 0.5s ease-out forwards;
      }
      .animate-slide-up {
        animation: slideUp 0.5s ease-out forwards;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes slideUp {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      /* UAE PASS scan line */
      .scan-line {
        width: 100%;
        height: 2px;
        background: #22c55e;
        position: absolute;
        top: 0;
        left: 0;
        animation: scan 2s infinite linear;
        box-shadow: 0 0 4px #22c55e;
      }
      @keyframes scan {
        0% {
          top: 0;
        }
        50% {
          top: 100%;
        }
        100% {
          top: 0;
        }
      }
    </style>
  </head>

  <body class="bg-slate-50 text-slate-900">
    <div id="root"></div>

    <script type="text/babel" data-presets="env,react">
      const { useState, useEffect } = React;
      const Lucide =
        window.LucideReact || new Proxy({}, { get: () => () => null });

      /* ---------- Generic components ---------- */

      const Button = ({
        children,
        onClick,
        variant = "primary",
        className = "",
        disabled = false,
        icon: Icon,
        type = "button",
      }) => {
        const base =
          "px-5 py-3 rounded-xl font-semibold transition-all active:scale-95 flex items-center justify-center gap-2 shadow-sm text-sm";
        const styles = {
          primary: "bg-emerald-700 text-white hover:bg-emerald-800",
          secondary:
            "bg-white text-slate-800 hover:bg-slate-50 border border-slate-200",
          ghost: "bg-transparent text-emerald-700 hover:bg-emerald-50",
          danger: "bg-rose-50 text-rose-700 hover:bg-rose-100",
          black: "bg-black text-white hover:bg-neutral-900",
          outline:
            "bg-transparent border border-slate-300 text-slate-700 hover:bg-slate-50",
        };

        return (
          <button
            type={type}
            onClick={onClick}
            disabled={disabled}
            className={`${base} ${styles[variant]} ${
              disabled ? "opacity-50 cursor-not-allowed" : ""
            } ${className}`}
          >
            {Icon && <Icon className="w-4 h-4" />}
            {children}
          </button>
        );
      };

      const Card = ({ children, className = "" }) => (
        <div
          className={`bg-white rounded-3xl border border-slate-200 shadow-sm ${className}`}
        >
          {children}
        </div>
      );

      /* ---------- Splash + UAE PASS login ---------- */

      const TammSplash = ({ onNext }) => {
        useEffect(() => {
          const timer = setTimeout(onNext, 1600);
          return () => clearTimeout(timer);
        }, [onNext]);

        return (
          <div className="h-screen flex items-center justify-center bg-[#005b4f] relative overflow-hidden">
            <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
            <div className="relative z-10 text-center animate-slide-up">
              <div className="mx-auto mb-8 w-24 h-24 rounded-3xl bg-white/10 border border-white/20 flex items-center justify-center shadow-2xl backdrop-blur-md">
                <Lucide.Activity className="w-10 h-10 text-white" />
              </div>
              <div className="text-sm tracking-[0.3em] text-emerald-100 uppercase mb-2">
                Abu Dhabi Government
              </div>
              <h1 className="text-4xl font-extrabold text-white tracking-tight">
                TAMM
              </h1>
              <p className="mt-3 text-emerald-100 text-sm">
                Connecting hospital, ICP, MOFA and TAMM into one newborn
                journey.
              </p>
              <div className="mt-10 flex items-center justify-center gap-2 text-emerald-100 text-xs">
                <Lucide.Loader2 className="w-4 h-4 animate-spin" />
                <span>Loading secure session…</span>
              </div>
            </div>
          </div>
        );
      };

      const UAEPassLogin = ({ onLogin }) => {
        const [isScanning, setIsScanning] = useState(false);

        const handleLogin = () => {
          setIsScanning(true);
          setTimeout(() => {
            setIsScanning(false);
            onLogin();
          }, 1800);
        };

        return (
          <div className="h-screen flex items-center justify-center bg-slate-50 relative px-4">
            <div className="absolute inset-0 bg-[radial-gradient(#e2e8f0_1px,transparent_1px)] [background-size:18px_18px] opacity-60"></div>

            <div className="relative z-10 w-full max-w-md">
              {!isScanning ? (
                <Card className="p-10 mx-auto">
                  <div className="text-center mb-10">
                    <h1 className="text-3xl font-extrabold text-slate-900 mb-2">
                      Welcome
                    </h1>
                    <p className="text-slate-500 text-sm max-w-xs mx-auto">
                      Sign in securely with UAE PASS to access your newborn
                      services.
                    </p>
                  </div>

                  <div className="border border-slate-100 rounded-2xl p-6 mb-6">
                    <div className="flex flex-col items-center mb-6">
                      <div className="w-16 h-16 rounded-2xl bg-slate-900 text-white flex flex-col items-center justify-center text-[11px] font-semibold shadow-lg">
                        <span>UAE</span>
                        <span>PASS</span>
                      </div>
                    </div>
                    <Button
                      onClick={handleLogin}
                      variant="black"
                      className="w-full h-12 text-sm justify-center"
                      icon={Lucide.Lock}
                    >
                      Login with UAE PASS
                    </Button>
                  </div>

                  <p className="text-center text-[11px] text-slate-400">
                    Your identity is verified by UAE PASS. No password is stored
                    in TAMM.
                  </p>
                </Card>
              ) : (
                <div className="flex flex-col items-center justify-center animate-fade-in">
                  <div className="w-32 h-32 rounded-3xl bg-white border-[3px] border-slate-900 shadow-2xl relative flex items-center justify-center mb-8">
                    <Lucide.Fingerprint className="w-16 h-16 text-slate-300" />
                    <div className="scan-line" />
                  </div>
                  <h2 className="text-xl font-bold text-slate-900 mb-1">
                    Verifying identity…
                  </h2>
                  <p className="text-slate-500 text-sm">
                    Please look at the camera.
                  </p>
                </div>
              )}
            </div>
          </div>
        );
      };

      /* ---------- Story / Home page ---------- */

      const StoryIntro = ({ onWalkAsIs, onJumpToBe, onOpenSummary }) => {
        return (
          <div className="min-h-screen bg-slate-50 px-4 py-6">
            <div className="max-w-3xl mx-auto">
              {/* Breadcrumb */}
              <div className="flex items-center text-xs text-slate-400 mb-4 gap-1">
                <button
                  className="hover:text-slate-600"
                  onClick={onOpenSummary}
                  type="button"
                >
                  Home
                </button>
                <span>/</span>
                <span className="font-semibold text-slate-500">
                  Newborn Journey Story
                </span>
              </div>

              {/* Hero */}
              <Card className="p-6 md:p-8 mb-6 bg-gradient-to-br from-emerald-800 to-emerald-700 text-white">
                <p className="text-[11px] font-semibold tracking-[0.2em] uppercase mb-3 text-emerald-100">
                  A seamless start to life
                </p>
                <h1 className="text-3xl md:text-4xl font-extrabold leading-tight mb-4">
                  One journey for every newborn in Abu Dhabi
                </h1>
                <p className="text-sm md:text-base text-emerald-50 max-w-2xl">
                  Every year around{" "}
                  <span className="font-semibold">45,000 families</span> in Abu
                  Dhabi go through the newborn paperwork journey. Today it is
                  scattered and stressful; our goal is to complete everything in
                  minutes, in one seamless experience.
                </p>
              </Card>

              {/* As-Is vs To-Be snapshot */}
              <div className="grid md:grid-cols-2 gap-4 mb-6">
                <Card className="p-5">
                  <h3 className="text-sm font-semibold text-rose-600 mb-3">
                    As‑Is today
                  </h3>
                  <ul className="text-sm text-slate-700 space-y-1.5">
                    <li>• 3 different platforms</li>
                    <li>• 10–23 touchpoints</li>
                    <li>• 3–4 days processing</li>
                    <li>• ~3,000 complaints per year</li>
                  </ul>
                </Card>
                <Card className="p-5">
                  <h3 className="text-sm font-semibold text-emerald-700 mb-3">
                    To‑Be vision
                  </h3>
                  <ul className="text-sm text-slate-700 space-y-1.5">
                    <li>• 1 seamless journey</li>
                    <li>• ~4 touchpoints</li>
                    <li>• Instant issuance</li>
                    <li>• Removes ~3,000 complaints</li>
                    <li>• Satisfaction &gt; 87%</li>
                  </ul>
                </Card>
              </div>

              {/* Why this change */}
              <Card className="p-5 mb-5">
                <h3 className="text-sm font-semibold text-slate-900 mb-3">
                  Why this change is urgent now
                </h3>
                <div className="space-y-1.5 text-sm text-slate-700">
                  <p>
                    <span className="font-semibold">Travel & passports:</span>{" "}
                    certificate delays block passports and urgent travel.
                  </p>
                  <p>
                    <span className="font-semibold">Medical access:</span>{" "}
                    without the certificate and ID, newborns can’t be insured or
                    seen easily by specialists.
                  </p>
                  <p>
                    <span className="font-semibold">Fees & fairness:</span>{" "}
                    today parents pay separate fees for Arabic & English
                    certificates and repeat MOFA attestation.
                  </p>
                  <p>
                    <span className="font-semibold">
                      Trust in digital government:
                    </span>{" "}
                    thousands of avoidable complaints erode confidence in the
                    wider platform.
                  </p>
                </div>
              </Card>

              {/* What prototype shows */}
              <Card className="p-5 mb-6">
                <h3 className="text-sm font-semibold text-slate-900 mb-3">
                  What this prototype shows
                </h3>
                <p className="text-sm text-slate-700 mb-2">
                  This prototype walks from today’s journey to the future one.
                  At each step you see:
                </p>
                <ul className="text-sm text-slate-700 space-y-1.5">
                  <li>• What parents do in the service.</li>
                  <li>
                    • How that step affects their life (travel, medical care,
                    money).
                  </li>
                  <li>
                    • How the To‑Be journey removes that harm and closes CRM
                    complaints.
                  </li>
                </ul>
              </Card>

              {/* Actions */}
              <div className="space-y-3 mb-6">
                <Button
                  onClick={onWalkAsIs}
                  className="w-full justify-center"
                  variant="primary"
                  icon={Lucide.Hourglass}
                >
                  Walk the As‑Is journey
                </Button>
                <Button
                  onClick={onJumpToBe}
                  className="w-full justify-center"
                  variant="secondary"
                  icon={Lucide.Zap}
                >
                  Jump to To‑Be experience
                </Button>
                <Button
                  onClick={onOpenSummary}
                  className="w-full justify-center text-sm"
                  variant="ghost"
                  icon={Lucide.BarChart3}
                >
                  Summary
                </Button>
              </div>
            </div>
          </div>
        );
      };

      /* ---------- Summary page (DOH-style) ---------- */

      const LucideIcon = ({ name, className }) => (
        <i data-lucide={name} className={className}></i>
      );

      const SummaryPage = ({ onBack }) => {
        const [expandedId, setExpandedId] = useState(1);

        useEffect(() => {
          if (window.lucide) {
            window.lucide.createIcons();
          }
        }, [expandedId]);

        const transformations = [
          {
            id: 1,
            title: "Unified newborn journey",
            iconName: "baby",
            impact: "1 seamless journey",
            current:
              "Parents move between DOH, ICP and MOFA across three portals and 10–23 touchpoints, with 3–4 days of processing and ~3,000 complaints per year.",
            future:
              "A single newborn journey in TAMM, triggered automatically from the hospital, completes birth certificate, Emirates ID and passport in one flow.",
            crmNote:
              "I’ve just had my baby and I’m stuck on the very first screen. I keep choosing the birth notification number and the system errors — I can’t even start the application, and now our passports and medical appointments are on hold.",
          },
          {
            id: 2,
            title: "Smart naming & data quality",
            iconName: "type",
            impact: "Zero name mismatch",
            current:
              "Parents type Arabic and English names manually. Small spelling differences trigger rejections, resubmissions and long delays.",
            future:
              "AI‑assisted naming and ICP rules validate both languages instantly, so parents only move forward when the name is safe.",
            crmNote:
              "They rejected my application because the Arabic name didn’t match the English spelling. I had to pay again and start over.",
          },
          {
            id: 3,
            title: "Documents & fees in one place",
            iconName: "folder-check",
            impact: "No re‑uploads",
            current:
              "Parents re‑upload the same IDs, passports and marriage contract across multiple portals, then pay separate Arabic, English and MOFA fees.",
            future:
              "Documents flow from ICP, Malafi and Usrati in the background. Parents pay once for a bilingual certificate and optional MOFA attestation.",
            crmNote:
              "Why am I paying three times for one birth? Arabic, English and then again for MOFA — it’s the same baby.",
          },
          {
            id: 4,
            title: "Instant issuance & trust",
            iconName: "sparkles",
            impact: "Complaints removed",
            current:
              "Even after payment, some journeys stall as “pending”, forcing parents to chase call centres, service centres and banks to reconcile records.",
            future:
              "Real‑time reconciliation with AD Pay clears payments automatically. Certificates, IDs and passports are issued instantly into the digital locker.",
            crmNote:
              "The bank shows the payment as completed but TAMM still says pending. I don’t know who to call — I just need the documents.",
          },
        ];

        const toggleExpand = (id) => {
          setExpandedId((prev) => (prev === id ? null : id));
        };

        return (
          <div className="min-h-screen bg-slate-50 px-4 py-6">
            <div className="max-w-4xl mx-auto">
              {/* Top nav */}
              <div className="flex items-center justify-between mb-6">
                <button
                  onClick={onBack}
                  className="flex items-center gap-1 text-xs text-slate-500 hover:text-slate-700"
                >
                  <Lucide.ArrowLeft className="w-3 h-3" />
                  <span>Back to story</span>
                </button>
              </div>

              {/* Header */}
              <header className="mb-8">
                <div className="flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-5">
                  <div>
                    <div className="inline-flex items-center gap-2 mb-3">
                      <span className="bg-emerald-700 text-white px-3 py-1 rounded-md text-[10px] font-bold tracking-[0.2em] uppercase">
                        Transformation strategy
                      </span>
                    </div>
                    <h1 className="text-3xl md:text-4xl font-extrabold text-slate-900 mb-1">
                      Seamless Start for Every Newborn
                    </h1>
                    <p className="text-sm md:text-base text-slate-500 max-w-xl">
                      Transitioning from fragmented newborn services to a
                      unified, family‑first journey by connecting hospital, ICP,
                      MOFA and TAMM data.
                    </p>
                  </div>

                  <div className="bg-white border border-slate-200 px-5 py-3 rounded-2xl shadow-sm max-w-xs">
                    <p className="text-[10px] font-semibold text-slate-500 uppercase tracking-[0.2em] mb-1">
                      Executive briefing
                    </p>
                    <p className="text-sm text-slate-800">
                      Your Excellency, these are the key levers to remove
                      ~3,000 newborn complaints a year.
                    </p>
                  </div>
                </div>
              </header>

              {/* Transformation cards */}
              <div className="space-y-4">
                {transformations.map((item) => {
                  const expanded = expandedId === item.id;
                  return (
                    <div
                      key={item.id}
                      className={`bg-white rounded-2xl border shadow-sm transition-all duration-300 overflow-hidden ${
                        expanded
                          ? "border-emerald-500 ring-4 ring-emerald-100/80"
                          : "border-slate-200 hover:border-slate-300"
                      }`}
                    >
                      <button
                        type="button"
                        onClick={() => toggleExpand(item.id)}
                        className="w-full flex items-center justify-between px-5 py-4 text-left group"
                      >
                        <div className="flex items-center gap-4">
                          <div
                            className={`p-3 rounded-xl transition-colors ${
                              expanded
                                ? "bg-emerald-600 text-white"
                                : "bg-slate-100 text-slate-600 group-hover:bg-slate-200"
                            }`}
                          >
                            <LucideIcon
                              name={item.iconName}
                              className="w-5 h-5"
                            />
                          </div>
                          <div>
                            <h3 className="text-sm md:text-base font-semibold text-slate-900">
                              {item.title}
                            </h3>
                            <p className="text-[11px] uppercase tracking-[0.16em] text-slate-400 mt-0.5">
                              Key outcome:
                              <span className="ml-1 text-emerald-600 font-semibold">
                                {item.impact}
                              </span>
                            </p>
                          </div>
                        </div>

                        <div
                          className={`p-2 rounded-full ${
                            expanded
                              ? "bg-emerald-100 text-emerald-700"
                              : "bg-slate-50 text-slate-400"
                          }`}
                        >
                          {expanded ? (
                            <LucideIcon name="chevron-up" className="w-4 h-4" />
                          ) : (
                            <LucideIcon
                              name="chevron-down"
                              className="w-4 h-4"
                            />
                          )}
                        </div>
                      </button>

                      {expanded && (
                        <div className="px-5 pb-5 pt-1">
                          <div className="grid md:grid-cols-2 gap-4 relative">
                            <div className="hidden md:flex absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 z-10 items-center justify-center w-10 h-10 bg-white rounded-full border border-slate-200 shadow-sm text-emerald-600">
                              <LucideIcon
                                name="arrow-right"
                                className="w-4 h-4"
                              />
                            </div>

                            <div className="bg-slate-50 p-4 rounded-xl border border-slate-100">
                              <div className="flex items-center gap-2 mb-2">
                                <span className="w-1.5 h-1.5 rounded-full bg-slate-400" />
                                <span className="text-[11px] font-semibold text-slate-500 uppercase tracking-[0.18em]">
                                  Current state
                                </span>
                              </div>
                              <p className="text-sm text-slate-600 leading-relaxed italic">
                                “{item.current}”
                              </p>
                            </div>

                            <div className="bg-emerald-50 p-4 rounded-xl border border-emerald-100 ring-1 ring-emerald-200/60">
                              <div className="flex items-center gap-2 mb-2">
                                <LucideIcon
                                  name="sparkles"
                                  className="w-4 h-4 text-emerald-600"
                                />
                                <span className="text-[11px] font-semibold text-emerald-700 uppercase tracking-[0.18em]">
                                  Future state
                                </span>
                              </div>
                              <p className="text-sm text-slate-900 leading-relaxed">
                                {item.future}
                              </p>
                            </div>
                          </div>

                          {/* CRM voice */}
                          <div className="mt-4 bg-violet-50 border border-violet-200 rounded-xl p-4 relative overflow-hidden">
                            <LucideIcon
                              name="message-circle"
                              className="w-10 h-10 text-violet-100 absolute -top-3 -left-1 rotate-12"
                            />
                            <span className="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-semibold uppercase tracking-[0.16em] bg-violet-200 text-violet-800 mb-2">
                              CRM voice of parent
                            </span>
                            <p className="text-sm text-slate-700 leading-relaxed">
                              “{item.crmNote}”
                            </p>
                          </div>
                        </div>
                      )}
                    </div>
                  );
                })}
              </div>

              {/* Impact metrics */}
              <section className="mt-10 bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
                <h2 className="text-base font-semibold text-slate-900 mb-4 flex items-center gap-2">
                  <LucideIcon
                    name="zap"
                    className="w-4 h-4 text-yellow-500"
                  />
                  Projected ecosystem impact
                </h2>
                <div className="grid md:grid-cols-3 gap-4">
                  <div className="p-4 bg-slate-50 rounded-xl border border-slate-100">
                    <p className="text-[11px] text-slate-500 font-semibold uppercase tracking-[0.16em] mb-1">
                      Touchpoint savings
                    </p>
                    <div className="text-2xl font-black text-slate-900">
                      23 → 4
                    </div>
                    <p className="text-[11px] text-slate-400 mt-1">
                      Unified newborn journey
                    </p>
                  </div>
                  <div className="p-4 bg-slate-50 rounded-xl border border-slate-100">
                    <p className="text-[11px] text-slate-500 font-semibold uppercase tracking-[0.16em] mb-1">
                      Family time
                    </p>
                    <div className="text-2xl font-black text-slate-900">
                      2–3 days → minutes
                    </div>
                    <p className="text-[11px] text-slate-400 mt-1">
                      From waiting to instant issuance
                    </p>
                  </div>
                  <div className="p-4 bg-slate-50 rounded-xl border border-slate-100">
                    <p className="text-[11px] text-slate-500 font-semibold uppercase tracking-[0.16em] mb-1">
                      Complaints removed
                    </p>
                    <div className="text-2xl font-black text-slate-900">
                      ~3,000
                    </div>
                    <p className="text-[11px] text-slate-400 mt-1">
                      CRM newborn complaints per year
                    </p>
                  </div>
                </div>
              </section>
            </div>
          </div>
        );
      };

      /* ---------- As‑Is journey ---------- */

      const FeeRow = ({ label, amount, active, onToggle }) => (
        <button
          type="button"
          onClick={onToggle}
          className={`w-full flex items-center justify-between px-3 py-3 rounded-xl border text-left transition-all ${
            active
              ? "border-emerald-600 bg-emerald-50"
              : "border-slate-200 hover:border-emerald-500 hover:bg-emerald-50/40"
          }`}
        >
          <div className="flex items-center gap-3">
            <span
              className={`w-4 h-4 rounded-full border flex items-center justify-center ${
                active ? "border-emerald-600 bg-emerald-600" : "border-slate-400"
              }`}
            >
              {active && <span className="w-2 h-2 rounded-full bg-white" />}
            </span>
            <span className="text-sm text-slate-800">{label}</span>
          </div>
          <span className="text-sm font-semibold text-slate-900">{amount}</span>
        </button>
      );

      const AsIsJourney = ({
        onBack,
        startStep = 1,
        onSeeToBeStep = () => {},
      }) => {
        const [step, setStep] = useState(startStep);
        const [selectedNotif, setSelectedNotif] = useState("");
        const [selectedFees, setSelectedFees] = useState({
          arabic: true,
          english: true,
          mofa: true,
        });

        useEffect(() => {
          setStep(startStep || 1);
          window.scrollTo(0, 0);
        }, [startStep]);

        const toggleFee = (key) => {
          setSelectedFees((prev) => ({ ...prev, [key]: !prev[key] }));
        };

        const StepHeaderBar = () => {
          const steps = [
            { id: 1, label: "Notification" },
            { id: 2, label: "Documents" },
            { id: 3, label: "Baby details" },
            { id: 4, label: "Payment" },
            { id: 5, label: "Certificate" },
          ];
          return (
            <div className="flex justify-between items-center mb-5 px-1">
              {steps.map((s) => {
                const active = step === s.id;
                const done = step > s.id;
                return (
                  <div
                    key={s.id}
                    className="flex flex-col items-center gap-1 text-[11px]"
                  >
                    <div
                      className={`w-8 h-8 rounded-full flex items-center justify-center border text-xs font-semibold ${
                        active
                          ? "bg-emerald-700 text-white border-emerald-700"
                          : done
                          ? "bg-emerald-50 text-emerald-700 border-emerald-400"
                          : "bg-slate-50 text-slate-500 border-slate-300"
                      }`}
                    >
                      {done ? (
                        <Lucide.Check className="w-4 h-4" />
                      ) : (
                        s.id
                      )}
                    </div>
                    <span
                      className={`${
                        active ? "text-slate-900" : "text-slate-400"
                      }`}
                    >
                      {s.label}
                    </span>
                  </div>
                );
              })}
            </div>
          );
        };

        const renderStep = () => {
          /* ---- STEP 1 ---- */
          if (step === 1) {
            return (
              <>
                <h2 className="text-xl font-semibold text-slate-900 mb-2">
                  Step 1 · Select birth notification
                </h2>
                <p className="text-sm text-slate-600 mb-2">
                  Parents must find and select the correct birth notification
                  number before they can continue.
                </p>
                <p className="text-sm text-rose-700 font-semibold mb-4">
                  What parents say:{" "}
                  <span className="font-normal">
                    “I select the birth notification number and the system
                    errors — I can’t even start the application.”
                  </span>
                </p>

                <Card className="p-4 mb-4">
                  <p className="text-xs font-semibold text-slate-500 mb-2">
                    Birth notification number
                  </p>
                  <div className="space-y-2">
                    {[
                      "AD/BTH-NC/0030214/2024",
                      "AD/BTH-NC/0031020/2024",
                      "AG/BTH/MC/0032292/2024",
                    ].map((id) => (
                      <button
                        key={id}
                        type="button"
                        onClick={() => setSelectedNotif(id)}
                        className={`w-full flex items-center justify-between px-3 py-3 rounded-xl border text-left text-sm ${
                          selectedNotif === id
                            ? "border-emerald-600 bg-emerald-50"
                            : "border-slate-200 hover:border-emerald-500 hover:bg-emerald-50/40"
                        }`}
                      >
                        <span className="text-slate-800">{id}</span>
                        <span
                          className={`w-5 h-5 rounded-full border flex items-center justify-center ${
                            selectedNotif === id
                              ? "border-emerald-600"
                              : "border-slate-400"
                          }`}
                        >
                          {selectedNotif === id && (
                            <span className="w-2.5 h-2.5 rounded-full bg-emerald-600" />
                          )}
                        </span>
                      </button>
                    ))}
                  </div>
                </Card>

                <div className="mt-4 space-y-3">
                  <Button
                    onClick={() => setStep(2)}
                    className="w-full justify-center"
                    disabled={!selectedNotif}
                  >
                    Next
                  </Button>
                  <Button
                    variant="ghost"
                    className="w-full justify-center text-xs"
                    onClick={() => onSeeToBeStep(1)}
                  >
                    See To‑Be version of this step
                  </Button>
                </div>
              </>
            );
          }

          /* ---- STEP 2 ---- */
          if (step === 2) {
            return (
              <>
                <h2 className="text-xl font-semibold text-slate-900 mb-2">
                  Step 2 · Upload documents
                </h2>
                <p className="text-sm text-slate-600 mb-2">
                  Parents re‑upload documents that already exist in ICP and
                  other systems.
                </p>
                <p className="text-sm text-rose-700 font-semibold mb-4">
                  What parents say:{" "}
                  <span className="font-normal">
                    “Why am I uploading the same passports and IDs again? The
                    government already has them.”
                  </span>
                </p>

                <Card className="p-4 mb-4">
                  <p className="text-xs font-semibold text-slate-500 mb-2">
                    Required uploads
                  </p>
                  <div className="space-y-2">
                    {[
                      "Father’s passport",
                      "Mother’s passport",
                      "Marriage contract",
                      "Family book",
                      "Father’s Emirates ID",
                      "Mother’s Emirates ID",
                    ].map((doc) => (
                      <div
                        key={doc}
                        className="flex items-center justify-between px-3 py-2.5 rounded-xl border border-dashed border-slate-300 bg-slate-50 text-xs"
                      >
                        <span className="text-slate-700">{doc}</span>
                        <span className="text-emerald-700 font-semibold">
                          Upload
                        </span>
                      </div>
                    ))}
                  </div>

                  <div className="mt-3 bg-amber-50 border border-amber-200 text-amber-800 text-xs rounded-xl px-3 py-2 flex gap-2">
                    <Lucide.AlertTriangle className="w-4 h-4 mt-0.5" />
                    <p>
                      “ICP already has my data, but every portal asks me to
                      upload the same documents again.”
                    </p>
                  </div>
                </Card>

                <div className="mt-4 space-y-3">
                  <Button
                    onClick={() => setStep(3)}
                    className="w-full justify-center"
                  >
                    Next
                  </Button>
                  <Button
                    variant="ghost"
                    className="w-full justify-center text-xs"
                    onClick={() => onSeeToBeStep(2)}
                  >
                    See To‑Be version of this step
                  </Button>
                </div>
              </>
            );
          }

          /* ---- STEP 3 ---- */
          if (step === 3) {
            return (
              <>
                <h2 className="text-xl font-semibold text-slate-900 mb-2">
                  Step 3 · Baby details
                </h2>
                <p className="text-sm text-slate-600 mb-2">
                  Parents type Arabic and English names manually, hoping they
                  match ICP rules.
                </p>
                <p className="text-sm text-rose-700 font-semibold mb-4">
                  What parents say:{" "}
                  <span className="font-normal">
                    “If I get one letter wrong in Arabic, they reject the whole
                    application and I have to pay again.”
                  </span>
                </p>

                <Card className="p-4 mb-4 space-y-4">
                  <div>
                    <label className="block text-xs font-semibold text-slate-500 mb-1">
                      Baby name (English)
                    </label>
                    <input
                      type="text"
                      className="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"
                      placeholder="Type name…"
                    />
                  </div>
                  <div>
                    <label className="block text-xs font-semibold text-slate-500 mb-1">
                      Baby name (Arabic)
                    </label>
                    <input
                      type="text"
                      className="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm text-right focus:outline-none focus:ring-2 focus:ring-emerald-500"
                      placeholder="أدخل الاسم…"
                    />
                  </div>
                  <div className="grid grid-cols-2 gap-3 text-xs">
                    <div>
                      <label className="block text-[11px] font-semibold text-slate-500 mb-1 uppercase">
                        Nationality
                      </label>
                      <select className="w-full rounded-xl border border-slate-300 px-2 py-2 text-xs">
                        <option>United Arab Emirates</option>
                      </select>
                    </div>
                    <div>
                      <label className="block text-[11px] font-semibold text-slate-500 mb-1 uppercase">
                        Religion
                      </label>
                      <select className="w-full rounded-xl border border-slate-300 px-2 py-2 text-xs">
                        <option>Islam</option>
                      </select>
                    </div>
                  </div>
                  <p className="text-[11px] text-slate-400 italic">
                    Parents must guess how the Arabic and English names should
                    match ICP rules.
                  </p>
                </Card>

                <div className="mt-4 space-y-3">
                  <Button
                    onClick={() => setStep(4)}
                    className="w-full justify-center"
                  >
                    Next
                  </Button>
                  <Button
                    variant="ghost"
                    className="w-full justify-center text-xs"
                    onClick={() => onSeeToBeStep(2)}
                  >
                    See To‑Be version of this step
                  </Button>
                </div>
              </>
            );
          }

          /* ---- STEP 4 ---- */
          if (step === 4) {
            return (
              <>
                <h2 className="text-xl font-semibold text-slate-900 mb-2">
                  Step 4 · Separate payments
                </h2>
                <p className="text-sm text-slate-600 mb-2">
                  Parents pay separately for Arabic and English certificates,
                  then again for MOFA attestation.
                </p>
                <p className="text-sm text-rose-700 font-semibold mb-4">
                  What parents say:{" "}
                  <span className="font-normal">
                    “It’s one baby, but I’m paying fees multiple times for the
                    same certificate.”
                  </span>
                </p>

                <Card className="p-4 mb-4 space-y-3">
                  <FeeRow
                    label="Arabic certificate"
                    amount="50 AED"
                    active={selectedFees.arabic}
                    onToggle={() => toggleFee("arabic")}
                  />
                  <FeeRow
                    label="English certificate"
                    amount="50 AED"
                    active={selectedFees.english}
                    onToggle={() => toggleFee("english")}
                  />
                  <FeeRow
                    label="MOFA attestation"
                    amount="150 AED"
                    active={selectedFees.mofa}
                    onToggle={() => toggleFee("mofa")}
                  />
                </Card>

                <div className="mt-4 space-y-3">
                  <Button
                    onClick={() => setStep(5)}
                    className="w-full justify-center"
                  >
                    Next
                  </Button>
                  <Button
                    variant="ghost"
                    className="w-full justify-center text-xs"
                    onClick={() => onSeeToBeStep(4)}
                  >
                    See To‑Be version of this step
                  </Button>
                </div>
              </>
            );
          }

          /* ---- STEP 5 ---- */
          return (
            <>
              <h2 className="text-xl font-semibold text-slate-900 mb-2">
                Step 5 · Certificate after delays
              </h2>
              <p className="text-sm text-slate-600 mb-2">
                After multiple uploads, payments and checks, the certificate is
                eventually issued — often days later.
              </p>
              <p className="text-sm text-rose-700 font-semibold mb-4">
                What parents say:{" "}
                <span className="font-normal">
                  “We can’t travel or see specialists until everything is
                  finished. One error in the system delays our whole life.”
                </span>
              </p>

              <Card className="p-5 mb-4">
                <div className="flex items-center justify-center mb-4">
                  <div className="w-16 h-16 rounded-full bg-emerald-50 flex items-center justify-center">
                    <Lucide.FileText className="w-8 h-8 text-emerald-600" />
                  </div>
                </div>
                <h3 className="text-lg font-semibold text-center mb-2">
                  Certificate issued — after 3–4 days
                </h3>
                <p className="text-sm text-slate-600 text-center mb-4">
                  Parents finally receive the birth certificate, then repeat the
                  journey in other portals for ID, passport and MOFA.
                </p>
                <div className="bg-slate-50 border border-slate-200 rounded-xl p-3 text-xs text-slate-700">
                  Each failure in this journey keeps a newborn without
                  documents, delaying travel, medical care and insurance.
                </div>
              </Card>

              <div className="mt-4 space-y-3">
                <Button
                  onClick={onBack}
                  className="w-full justify-center"
                  variant="secondary"
                >
                  Back to options
                </Button>
              </div>
            </>
          );
        };

        return (
          <div className="min-h-screen bg-slate-100 px-4 py-6">
            <div className="max-w-md mx-auto">
              <Card>
                <div className="px-4 pt-4 pb-3 border-b border-slate-100 flex items-center justify-between">
                  <button
                    onClick={onBack}
                    className="flex items-center gap-1 text-xs text-slate-500 hover:text-slate-700"
                  >
                    <Lucide.ArrowLeft className="w-3 h-3" />
                    <span>Options</span>
                  </button>
                  <div className="text-xs font-semibold text-slate-500">
                    As‑Is journey
                  </div>
                  <div className="w-6" />
                </div>
                <div className="px-4 pt-4 pb-6">
                  <StepHeaderBar />
                  {renderStep()}
                </div>
              </Card>
            </div>
          </div>
        );
      };

      /* ---------- To‑Be journey ---------- */

      const NAME_DATA = {
        boy: {
          Z: [
            {
              en: "Zayed",
              ar: "زايد",
              meaning: "Growth; one who increases in goodness.",
            },
            {
              en: "Ziad",
              ar: "زياد",
              meaning: "Abundance; increasing in virtue.",
            },
            {
              en: "Zuhair",
              ar: "زهير",
              meaning: "Bright; shining and clear.",
            },
          ],
          K: [
            {
              en: "Khalifa",
              ar: "خليفة",
              meaning: "Successor; one who takes on responsibility.",
            },
            {
              en: "Khalid",
              ar: "خالد",
              meaning: "Everlasting; long‑lived.",
            },
            {
              en: "Khalfan",
              ar: "خلفان",
              meaning: "One who follows and supports others.",
            },
          ],
          H: [
            {
              en: "Hamdan",
              ar: "حمدان",
              meaning: "One who gives thanks often.",
            },
            {
              en: "Hamad",
              ar: "حمد",
              meaning: "Praise; gratitude.",
            },
            {
              en: "Hazza",
              ar: "هزاع",
              meaning: "Courageous; noble in character.",
            },
          ],
        },
        girl: {
          Z: [
            {
              en: "Zainab",
              ar: "زينب",
              meaning: "Fragrant flower; noble and caring.",
            },
            {
              en: "Zahra",
              ar: "زهرة",
              meaning: "Radiant; blossoming and bright.",
            },
            {
              en: "Zoya",
              ar: "زويا",
              meaning: "Loving; caring and gentle.",
            },
          ],
          K: [
            {
              en: "Khadija",
              ar: "خديجة",
              meaning: "Respected; wise and steadfast.",
            },
            {
              en: "Kawthar",
              ar: "كوثر",
              meaning: "Abundant goodness and blessing.",
            },
            {
              en: "Kulthum",
              ar: "كلثوم",
              meaning: "Full‑cheeked; radiant and kind.",
            },
          ],
          H: [
            {
              en: "Hessa",
              ar: "حصة",
              meaning: "Portion; a share of goodness.",
            },
            {
              en: "Hanan",
              ar: "حنان",
              meaning: "Compassion; tenderness and mercy.",
            },
            {
              en: "Huda",
              ar: "هدى",
              meaning: "Guidance; on the right path.",
            },
          ],
        },
      };

      const ToBeJourney = ({
        onBack,
        startStep = 1,
        onCompareAsIsStep = () => {},
      }) => {
        const [step, setStep] = useState(startStep || 1);

        const [nameEn, setNameEn] = useState("");
        const [nameAr, setNameAr] = useState("");
        const [gender, setGender] = useState("boy");
        const [selectedLetter, setSelectedLetter] = useState("Z");
        const [aiSuggestions, setAiSuggestions] = useState([]);

        const [addMofa, setAddMofa] = useState(false);
        const [isReconciling, setIsReconciling] = useState(false);
        const [reconciled, setReconciled] = useState(false);

        useEffect(() => {
          setStep(startStep || 1);
          window.scrollTo(0, 0);
        }, [startStep]);

        const isNameConfirmed =
          nameEn.trim().length > 0 && nameAr.trim().length > 0;

        const handleGenerateNames = () => {
          const list =
            NAME_DATA[gender][selectedLetter] ||
            NAME_DATA[gender]["Z"] ||
            [];
          setAiSuggestions(list);
        };

        const handleReconcile = () => {
          setIsReconciling(true);
          setTimeout(() => {
            setIsReconciling(false);
            setReconciled(true);
          }, 1500);
        };

        const StepHeaderBar = () => {
          const steps = [
            { id: 1, label: "Start" },
            { id: 2, label: "Naming" },
            { id: 3, label: "Documents" },
            { id: 4, label: "Payment" },
            { id: 5, label: "Issued" },
          ];
          return (
            <div className="flex justify-between items-center mb-5 px-1">
              {steps.map((s) => {
                const active = step === s.id;
                const done = step > s.id;
                return (
                  <div
                    key={s.id}
                    className="flex flex-col items-center gap-1 text-[11px]"
                  >
                    <div
                      className={`w-8 h-8 rounded-full flex items-center justify-center border text-xs font-semibold ${
                        active
                          ? "bg-emerald-700 text-white border-emerald-700"
                          : done
                          ? "bg-emerald-50 text-emerald-700 border-emerald-400"
                          : "bg-slate-50 text-slate-500 border-slate-300"
                      }`}
                    >
                      {done ? (
                        <Lucide.Check className="w-4 h-4" />
                      ) : (
                        s.id
                      )}
                    </div>
                    <span
                      className={`${
                        active ? "text-slate-900" : "text-slate-400"
                      }`}
                    >
                      {s.label}
                    </span>
                  </div>
                );
              })}
            </div>
          );
        };

        const renderStep = () => {
          /* ---- STEP 1 ---- */
          if (step === 1) {
            return (
              <>
                <h2 className="text-xl font-semibold text-slate-900 mb-2">
                  Step 1 · Proactive notification
                </h2>
                <p className="text-sm text-slate-600 mb-4">
                  When the birth notification is completed in the hospital, the
                  Mabrouk Ma Yak journey starts automatically — no need to
                  search or type numbers.
                </p>

                <Card className="p-4 mb-4 bg-slate-900 text-white">
                  <div className="flex items-start gap-3">
                    <div className="mt-1">
                      <span className="inline-flex items-center justify-center w-8 h-8 rounded-full bg-amber-400 text-slate-900">
                        <Lucide.Baby className="w-5 h-5" />
                      </span>
                    </div>
                    <div>
                      <h3 className="font-semibold mb-1">Mabrouk Ma Yak!</h3>
                      <p className="text-sm text-slate-100">
                        We received a birth notification for your newborn. Tap
                        to name your baby and issue all documents in one
                        journey.
                      </p>
                      <p className="mt-2 text-[11px] text-slate-300">
                        Just now · from Malafi
                      </p>
                    </div>
                  </div>
                </Card>

                <div className="mt-4 space-y-3">
                  <Button
                    onClick={() => setStep(2)}
                    className="w-full justify-center"
                  >
                    Next
                  </Button>
                  <Button
                    variant="ghost"
                    className="w-full justify-center text-xs"
                    onClick={() => onCompareAsIsStep(1)}
                  >
                    Compare with As‑Is step
                  </Button>
                </div>
              </>
            );
          }

          /* ---- STEP 2: Naming ---- */
          if (step === 2) {
            return (
              <>
                <h2 className="text-xl font-semibold text-slate-900 mb-2">
                  Step 2 · Smart naming with AI
                </h2>
                <p className="text-sm text-slate-600 mb-4">
                  Parents can type a name or use AI suggestions, with instant
                  ICP validation before they move on.
                </p>

                <Card className="p-4 mb-4 space-y-5">
                  {/* Manual entry */}
                  <div className="space-y-3">
                    <div>
                      <label className="block text-xs font-semibold text-slate-500 mb-1">
                        Name (English)
                      </label>
                      <input
                        type="text"
                        value={nameEn}
                        onChange={(e) => setNameEn(e.target.value)}
                        placeholder="e.g. Zayed"
                        className="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"
                      />
                    </div>
                    <div>
                      <label className="block text-xs font-semibold text-slate-500 mb-1">
                        Name (Arabic)
                      </label>
                      <input
                        type="text"
                        value={nameAr}
                        onChange={(e) => setNameAr(e.target.value)}
                        placeholder="e.g. زايد"
                        className="w-full rounded-xl border border-slate-300 px-3 py-2 text-sm text-right focus:outline-none focus:ring-2 focus:ring-emerald-500"
                      />
                    </div>
                  </div>

                  <div className="flex items-center gap-3 text-[11px] text-slate-400">
                    <div className="flex-1 h-px bg-slate-200" />
                    <span>OR USE AI</span>
                    <div className="flex-1 h-px bg-slate-200" />
                  </div>

                  {/* AI helper */}
                  <div className="bg-violet-50 border border-violet-100 rounded-2xl p-4">
                    <div className="flex items-center justify-between mb-3">
                      <div className="flex items-center gap-2">
                        <Lucide.Sparkles className="w-4 h-4 text-violet-600" />
                        <span className="text-xs font-semibold text-violet-700">
                          AI name helper
                        </span>
                      </div>
                      <div className="flex text-[11px] bg-white rounded-full border border-violet-100 overflow-hidden">
                        <button
                          type="button"
                          onClick={() => setGender("boy")}
                          className={`px-3 py-1 ${
                            gender === "boy"
                              ? "bg-violet-600 text-white"
                              : "text-violet-700"
                          }`}
                        >
                          Boy
                        </button>
                        <button
                          type="button"
                          onClick={() => setGender("girl")}
                          className={`px-3 py-1 ${
                            gender === "girl"
                              ? "bg-violet-600 text-white"
                              : "text-violet-700"
                          }`}
                        >
                          Girl
                        </button>
                      </div>
                    </div>

                    <p className="text-[11px] text-slate-500 mb-2">
                      Choose first letter (optional)
                    </p>
                    <div className="flex gap-2 mb-3">
                      {["Z", "K", "H"].map((letter) => (
                        <button
                          key={letter}
                          type="button"
                          onClick={() => setSelectedLetter(letter)}
                          className={`w-7 h-7 rounded-full text-xs font-semibold flex items-center justify-center border ${
                            selectedLetter === letter
                              ? "bg-violet-600 text-white border-violet-600"
                              : "bg-white text-violet-700 border-violet-200"
                          }`}
                        >
                          {letter}
                        </button>
                      ))}
                    </div>

                    <Button
                      variant="secondary"
                      className="w-full justify-center text-xs bg-white"
                      onClick={handleGenerateNames}
                    >
                      ✨ Generate name suggestions
                    </Button>

                    {aiSuggestions.length > 0 && (
                      <div className="mt-3 space-y-2">
                        {aiSuggestions.map((n, idx) => (
                          <button
                            key={idx}
                            type="button"
                            onClick={() => {
                              setNameEn(n.en);
                              setNameAr(n.ar);
                            }}
                            className="w-full text-left bg-white rounded-xl border border-violet-100 px-3 py-2 hover:border-violet-300"
                          >
                            <div className="flex items-center justify-between">
                              <p className="text-sm font-semibold text-slate-900">
                                {n.en} / {n.ar}
                              </p>
                              <span className="text-[11px] font-semibold text-violet-600">
                                {gender === "boy" ? "Boy" : "Girl"}
                              </span>
                            </div>
                            <p className="text-[11px] text-slate-500 mt-1">
                              Meaning: {n.meaning}
                            </p>
                          </button>
                        ))}
                      </div>
                    )}
                  </div>

                  {isNameConfirmed && (
                    <div className="mt-2 bg-emerald-50 border border-emerald-200 rounded-xl px-3 py-2 flex items-start gap-2 text-xs text-emerald-800">
                      <Lucide.ShieldCheck className="w-4 h-4 mt-0.5" />
                      <div>
                        <p className="font-semibold">Name verified</p>
                        <p>
                          Arabic and English forms match ICP naming rules. No
                          name‑mismatch rejections.
                        </p>
                      </div>
                    </div>
                  )}
                </Card>

                <div className="mt-4 space-y-3">
                  <Button
                    onClick={() => setStep(3)}
                    className="w-full justify-center"
                    disabled={!isNameConfirmed}
                  >
                    Next
                  </Button>
                  <Button
                    variant="ghost"
                    className="w-full justify-center text-xs"
                    onClick={() => onCompareAsIsStep(3)}
                  >
                    Compare with As‑Is step
                  </Button>
                </div>
              </>
            );
          }

          /* ---- STEP 3: Documents auto‑fetched ---- */
          if (step === 3) {
            return (
              <>
                <h2 className="text-xl font-semibold text-slate-900 mb-2">
                  Step 3 · Documents auto‑fetched
                </h2>
                <p className="text-sm text-slate-600 mb-4">
                  All required documents are pulled automatically from ICP,
                  Malafi and Usrati. Parents are not asked to upload what
                  government already knows.
                </p>

                <Card className="p-4 mb-4 space-y-3">
                  {[
                    "Father’s ID & passport",
                    "Mother’s ID & passport",
                    "Marriage contract",
                  ].map((label) => (
                    <div
                      key={label}
                      className="flex items-center justify-between px-3 py-2.5 rounded-xl border border-emerald-100 bg-emerald-50 text-sm"
                    >
                      <div className="flex items-center gap-2">
                        <div className="w-6 h-6 rounded-full bg-emerald-600 flex items-center justify-center">
                          <Lucide.Check className="w-3 h-3 text-white" />
                        </div>
                        <span className="text-slate-900">{label}</span>
                      </div>
                      <span className="text-[11px] text-emerald-700 font-semibold">
                        Ready
                      </span>
                    </div>
                  ))}
                </Card>

                <div className="mt-4 space-y-3">
                  <Button
                    onClick={() => setStep(4)}
                    className="w-full justify-center"
                  >
                    Next
                  </Button>
                  <Button
                    variant="ghost"
                    className="w-full justify-center text-xs"
                    onClick={() => onCompareAsIsStep(2)}
                  >
                    Compare with As‑Is step
                  </Button>
                </div>
              </>
            );
          }

          /* ---- STEP 4: Payment ---- */
          if (step === 4) {
            const baseBundle = 275;
            const total = baseBundle + (addMofa ? 150 : 0);

            return (
              <>
                <h2 className="text-xl font-semibold text-slate-900 mb-2">
                  Step 4 · Single payment for bundle
                </h2>
                <p className="text-sm text-slate-600 mb-4">
                  One payment covers birth certificate, Emirates ID and
                  passport, with an optional MOFA attestation add‑on and an
                  automated recovery layer.
                </p>

                <Card className="p-4 mb-4 space-y-4">
                  <div className="bg-slate-50 rounded-xl border border-slate-200 p-4">
                    <p className="text-xs font-semibold text-slate-500 mb-3">
                      Bundle breakdown
                    </p>
                    <div className="space-y-2 text-sm">
                      <div className="flex justify-between">
                        <span>Birth certificate</span>
                        <span className="font-semibold">AED 50.00</span>
                      </div>
                      <div className="flex justify-between">
                        <span>Emirates ID (newborn)</span>
                        <span className="font-semibold">AED 170.00</span>
                      </div>
                      <div className="flex justify-between">
                        <span>Passport issuance</span>
                        <span className="font-semibold">AED 55.00</span>
                      </div>
                      <div className="border-t border-slate-200 my-2" />
                      <div className="flex justify-between font-semibold text-emerald-700">
                        <span>Bundle total</span>
                        <span>AED 275.00</span>
                      </div>
                    </div>
                  </div>

                  {/* MOFA add‑on */}
                  <div
                    className={`p-4 rounded-xl border-2 cursor-pointer transition-all flex items-start gap-3 ${
                      addMofa
                        ? "border-emerald-600 bg-emerald-50"
                        : "border-slate-200 hover:border-emerald-400"
                    }`}
                    onClick={() => setAddMofa((v) => !v)}
                  >
                    <div
                      className={`w-5 h-5 rounded border flex items-center justify-center mt-0.5 ${
                        addMofa
                          ? "bg-emerald-600 border-emerald-600"
                          : "border-slate-300 bg-white"
                      }`}
                    >
                      {addMofa && (
                        <Lucide.Check className="w-3 h-3 text-white" />
                      )}
                    </div>
                    <div className="text-sm">
                      <div className="font-semibold text-slate-900">
                        Auto‑attest with MOFA
                      </div>
                      <p className="text-xs text-slate-500 mt-1">
                        Digital attestation stamp from Ministry of Foreign
                        Affairs for international use.
                      </p>
                      <div className="text-xs font-semibold text-emerald-700 mt-1">
                        +150.00 AED
                      </div>
                    </div>
                  </div>

                  {/* Payment total + buttons */}
                  <div className="flex items-center justify-between px-3 py-3 rounded-xl bg-slate-900 text-white">
                    <span className="text-sm font-medium">Total amount</span>
                    <span className="text-xl font-bold">
                      AED {total.toFixed(2)}
                    </span>
                  </div>

                  <Button
                    variant="black"
                    className="w-full justify-center"
                    icon={Lucide.Apple}
                  >
                    Pay with Apple Pay
                  </Button>

                  <div className="space-y-2">
                    {!reconciled ? (
                      <Button
                        variant="outline"
                        className="w-full justify-center text-xs border-dashed"
                        onClick={handleReconcile}
                        disabled={isReconciling}
                      >
                        {isReconciling ? (
                          <>
                            <Lucide.Loader2 className="w-3 h-3 animate-spin" />
                            <span>Reconciling with AD Pay…</span>
                          </>
                        ) : (
                          "Reconcile with AD Pay"
                        )}
                      </Button>
                    ) : (
                      <div className="w-full text-xs bg-emerald-50 border border-emerald-200 rounded-xl px-3 py-2 flex items-start gap-2 text-emerald-800">
                        <Lucide.CheckCircle2 className="w-4 h-4 mt-0.5" />
                        <span>
                          Payment reconciled with AD Pay. Journey continues
                          without a complaint.
                        </span>
                      </div>
                    )}
                  </div>
                </Card>

                <div className="mt-4 space-y-3">
                  <Button
                    onClick={() => setStep(5)}
                    className="w-full justify-center"
                  >
                    Next
                  </Button>
                  <Button
                    variant="ghost"
                    className="w-full justify-center text-xs"
                    onClick={() => onCompareAsIsStep(4)}
                  >
                    Compare with As‑Is step
                  </Button>
                </div>
              </>
            );
          }

          /* ---- STEP 5: Success ---- */
          const successText = addMofa
            ? "Your newborn’s birth certificate, Emirates ID, passport and MOFA‑attested certificate are now available in your digital locker and wallet."
            : "Your newborn’s birth certificate, Emirates ID and passport are now available in your digital locker and wallet.";

          return (
            <>
              <h2 className="text-xl font-semibold text-slate-900 mb-2">
                Step 5 · Documents issued instantly
              </h2>
              <p className="text-sm text-slate-600 mb-4">
                Birth certificate, Emirates ID and passport are issued together
                and stored in the digital locker.
              </p>

              <Card className="p-5 mb-4 space-y-5">
                <div className="flex items-center justify-center">
                  <div className="w-18 h-18 rounded-full bg-emerald-50 flex items-center justify-center">
                    <Lucide.Check className="w-10 h-10 text-emerald-600" />
                  </div>
                </div>
                <h3 className="text-lg font-semibold text-center">
                  Successfully issued
                </h3>
                <p className="text-sm text-slate-600 text-center">
                  {successText}
                </p>

                <div className="bg-slate-50 border border-slate-200 rounded-xl p-4 space-y-2 text-sm">
                  <div className="flex items-center justify-between">
                    <span>Birth certificate (PDF)</span>
                    <Lucide.Download className="w-4 h-4 text-slate-400" />
                  </div>
                  {addMofa && (
                    <p className="text-[11px] text-emerald-700">
                      Includes MOFA digital attestation for international use.
                    </p>
                  )}
                  <button
                    type="button"
                    className="mt-2 w-full flex items-center justify-center gap-2 bg-black text-white rounded-xl px-3 py-2 text-sm font-semibold hover:bg-neutral-900"
                  >
                    <Lucide.Wallet className="w-4 h-4" />
                    Add to Apple Wallet
                  </button>
                </div>

                <div className="bg-slate-900 text-white rounded-2xl p-4 flex flex-col gap-3">
                  <div>
                    <h4 className="text-sm font-semibold mb-1">
                      Hospital kiosk pickup
                    </h4>
                    <p className="text-[11px] text-slate-200">
                      Scan this code at the hospital kiosk to print the
                      newborn’s physical documents immediately.
                    </p>
                  </div>
                  <div className="bg-white rounded-lg p-2 w-fit">
                    <Lucide.QrCode className="w-16 h-16 text-slate-900" />
                  </div>
                </div>
              </Card>

              <div className="mt-4 space-y-3">
                <Button
                  variant="secondary"
                  className="w-full justify-center"
                  onClick={onBack}
                >
                  Back to options
                </Button>
                <Button
                  variant="ghost"
                  className="w-full justify-center text-xs"
                  onClick={() => onCompareAsIsStep(5)}
                >
                  Compare with As‑Is step
                </Button>
              </div>
            </>
          );
        };

        return (
          <div className="min-h-screen bg-slate-100 px-4 py-6">
            <div className="max-w-md mx-auto">
              <Card>
                <div className="px-4 pt-4 pb-3 border-b border-slate-100 flex items-center justify-between">
                  <button
                    onClick={onBack}
                    className="flex items-center gap-1 text-xs text-slate-500 hover:text-slate-700"
                  >
                    <Lucide.ArrowLeft className="w-3 h-3" />
                    <span>Options</span>
                  </button>
                  <div className="text-xs font-semibold text-emerald-700">
                    To‑Be journey
                  </div>
                  <div className="w-6" />
                </div>
                <div className="px-4 pt-4 pb-6">
                  <StepHeaderBar />
                  {renderStep()}
                </div>
              </Card>
            </div>
          </div>
        );
      };

      /* ---------- Main App ---------- */

      const App = () => {
        const [view, setView] = useState("splash"); // splash -> login -> home -> asis/tobe/summary
        const [asisStartStep, setAsisStartStep] = useState(1);
        const [tobeStartStep, setTobeStartStep] = useState(1);

        if (view === "splash") {
          return <TammSplash onNext={() => setView("login")} />;
        }

        if (view === "login") {
          return <UAEPassLogin onLogin={() => setView("home")} />;
        }

        if (view === "home") {
          return (
            <StoryIntro
              onWalkAsIs={() => {
                setAsisStartStep(1);
                setView("asis");
              }}
              onJumpToBe={() => {
                setTobeStartStep(1);
                setView("tobe");
              }}
              onOpenSummary={() => setView("summary")}
            />
          );
        }

        if (view === "summary") {
          return <SummaryPage onBack={() => setView("home")} />;
        }

        if (view === "asis") {
          return (
            <AsIsJourney
              startStep={asisStartStep}
              onBack={() => setView("home")}
              onSeeToBeStep={(step) => {
                setTobeStartStep(step);
                setView("tobe");
              }}
            />
          );
        }

        if (view === "tobe") {
          return (
            <ToBeJourney
              startStep={tobeStartStep}
              onBack={() => setView("home")}
              onCompareAsIsStep={(step) => {
                setAsisStartStep(step);
                setView("asis");
              }}
            />
          );
        }

        return null;
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>

